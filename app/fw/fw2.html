##一.前言
>你可能不需要Redux，那就别瞎搞！！！
Redux 的适用场景：多交互、多数据源。

##二.简介
三个点：action，view，state。

在Redux中 一个 State 对应一个 View。只要 State 相同，View 就相同。而且State 是View导致的。

简单的来说就是用户接触不到State ，只能在View的层面，操作View通过Action发出通知，从而改变State。

当Store 收到 Action 以后，会返回一个新的 State，来改变View。这个过程就叫做 Reducer，且它是一个函数，是一个[纯函数](http://blog.csdn.net/hongweigg/article/details/44035283)

>重要：Action只是通知我要改变了，而Reducer才是告诉你怎么去改变，告诉你怎么做才符合社会主义核心价值观，告诉你怎么才无愧于一个当代青年人。

很多人会误解，Redux？？？？    React的兄弟吧。当然react-redux是一种正确的打开方式，但并不是唯一，Redux这个King也可以用于Vue。

##三.MiddleWare
实际项目中涉及到很多异步操作，那么在Redux要实现异步，得依靠中间键，中间键如果是非必须的话尽量使用现成的中间键。自己造轮子。。。。。。。。。。你懂得~

一般我们要想添加其他功能选择是在发送Action的时候添加，那就是我们的store.dispatch方法上做文章。
但是store.dispatch作为Action的载体只能接受一个对象，我们添加不了其他功能。

这里就需要用到redux-thunk中间键。

使用方法：命令行在目录下执行：cnpm install --save redux-thunk

      import thunk from 'redux-thunk';
使用过后store.dispatch这个方法可以接受一个函数作为参数，ok，可以搞事了！
废话不多说
实践才是检验真理的唯一标准。

这里只是很简略的介绍了Redux，基本的使用方法请参照[Redux中文网](http://cn.redux.js.org/)  

##四.React-Redux
在React-Redux中所有组件分为UI组件（presentational component）和容器组件（container component）两大类
UI 组件负责 UI 的呈现，容器组件负责管理数据和逻辑

另外React-Redux 提供connect方法，用于从 UI 组件生成容器组件

connect方法有两个参数mapStateToProps和mapDispatchToProps
>mapStateToProps：映射Redux state到组件的属性 
mapDispatchToProps：映射Redux actions到组件的属性

当容器组件生成过后React-Redux提供了<Provider>组件，让容器组件拿到state。然后在将根组件包起来，这样所有的根组件就能够拿到state了。
像这样：
    
    ReactDOM.render(  
    <Provider store={store}>  
        <App />  
    </Provider>,  
    document.getElementById('root')  
    )  
##五.Do it
使用webpack来构建

>package.json


     {
        "scripts": {
        "start": "webpack",
        "dev": "webpack --watch"
        },
        "devDependencies": {
        "babel-core": "^6.26.0",
        "babel-loader": "^7.1.2",
        "babel-preset-es2015": "^6.24.1",
        "babel-preset-react": "^6.24.1",
        "css-loader": "^0.28.7",
        "style-loader": "^0.19.0",
        "webpack": "^3.6.0"
        },
        "dependencies": {
        "react": "^15.6.2",
        "react-dom": "^15.6.2",
        "react-redux": "^5.0.3",
        "react-router": "^4.0.0",
        "redux": "^3.6.0",
        "redux-thunk": "^2.2.0"
        }
    }

>项目目录：

![1.png](http://upload-images.jianshu.io/upload_images/7003250-8d3d00fc23959a6c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
这里建议将action和reducer分离开来，因为项目较大的话，你可能会有很多种不同的action或者reducer，方便后期维护。

>main.js
    
    import React, { Component } from 'react';  

    import ReactDOM from 'react-dom';  

    import { createStore , applyMiddleware} from 'redux';  

    import { Provider, connect } from 'react-redux';

    import thunk from 'redux-thunk';

    import * as actions from './actions.js'; 

    import reducer from './reducer.js'; 

    import Top from './common/Top.js';

    import Content from './common/Content.js' 

    require('./main.css');

    class App extends Component{  
        render() {  
            const {onGetDataClick,list} = this.props;
            let name = "XXX系统";  
            return (  
                <div>  
                    <Top name={name} />
                    <button onClick={onGetDataClick}>Get</button>
                    <Content data={list} />
                </div>  
            );  
        }  
    }  
  
    let store = createStore(reducer,applyMiddleware(thunk));        //使用中间键
  
    function mapStateToProps(state) {          //将Redux state映射到组件的属性
        return { 
                 list : state.list
               }  
    }  
  
    function mapDispatchToProps(dispatch){         //定义事件的action
        return{  
            onGetDataClick:()=>dispatch(actions.getDataAction),  
        }  
    }  
  
    App = connect(mapStateToProps, mapDispatchToProps)(App)   //绑定到App组件
  
    ReactDOM.render(  
        <Provider store={store}>  
            <App />  
        </Provider>,  
        document.getElementById('root')  
    )  

>actions.js

    const getDataAction = (dispatch) => {  
        $.ajax({
        	url:"xxxxxxxxxxxxxxxxxxxxxxxx",
        	type:"post",
        	dataType:"json",
        	data:{},
        	success:function(res){
                       dispatch({type:"RES_SUCCESS",data:data})
        	}，
            error:function(){
                      dispatch({type:"RES_ERROR"})
            },
            compelet:function(){
                      dispatch({type:"RES_COMPELET"})
           }
        })
    }  
    export {getDataAction}

这里我们dispatch第一次执行咱们的请求，根据不同状态再发送Action来触发 Reducer 

>reducer.js
    
    const initialState = {  
        list:[] 
    } 

    export default (state = initialState, action) => {  
        switch (action.type) {  
            case 'RES_ERROR':  
                return {  
                     list:"Error"
                }  
            case 'RES_COMPELET':  
                return {  
                     list:"Compelet"
                } 
            case 'RES_SUCCESS':
                return {
                    list:action.data
                } 
            default:  
                return initialState;  
        }  
    }

Reduce中我们接收到一个Action，然后返回一个State，然后映射到组件的属性上，实现View的更新

>Content.js

    import React, {Component} from 'react';

    export default class extends Component{
    render() {
        return (
          <div className="content">
              <table id="managelist">
                <thead>
                  <tr> //此处不可省略tr，不然react会抛出警告
                      <th>XXX</th>
                      <th>XXX</th>
                      <th>XXX</th>
                  </tr>
                </thead>
                <tbody>
                    {this.props.data.map(function(item,index){
                     return (
                            ...............................
                    )})}
                </tbody>
              </table> 
          </div>
        );
      }
    }

>粗略介绍，前路漫漫。


  






























